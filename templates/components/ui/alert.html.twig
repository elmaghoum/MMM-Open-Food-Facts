{#
    Shadcn Alert Component
#}

{% set variant = variant|default('default') %}
{% set dismissible = dismissible|default(false) %}

{% set variantClasses = {
    'default': 'bg-background text-foreground',
    'destructive': 'border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive',
    'success': 'border-green-500/50 text-green-700 dark:border-green-500 [&>svg]:text-green-600 bg-green-50',
    'warning': 'border-yellow-500/50 text-yellow-700 dark:border-yellow-500 [&>svg]:text-yellow-600 bg-yellow-50',
} %}

<div class="relative w-full rounded-lg border p-4 pr-10 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground {{ variantClasses[variant] }} {{ class|default('') }}" role="alert">
    {# Icon #}
    {% if variant == 'destructive' %}
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4">
            <circle cx="12" cy="12" r="10"/>
            <line x1="12" x2="12" y1="8" y2="12"/>
            <line x1="12" x2="12.01" y1="16" y2="16"/>
        </svg>
    {% elseif variant == 'success' %}
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4">
            <path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/>
            <path d="m9 12 2 2 4-4"/>
        </svg>
    {% elseif variant == 'warning' %}
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4">
            <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
            <path d="M12 9v4"/>
            <path d="M12 17h.01"/>
        </svg>
    {% else %}
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4">
            <circle cx="12" cy="12" r="10"/>
            <path d="M12 16v-4"/>
            <path d="M12 8h.01"/>
        </svg>
    {% endif %}

    <div>
        {% if title is defined %}
            <h5 class="mb-1 font-medium leading-none tracking-tight">{{ title }}</h5>
        {% endif %}
        {% if description is defined %}
            <div class="text-sm [&_p]:leading-relaxed">{{ description|raw }}</div>
        {% endif %}
    </div>

    {% if dismissible %}
        <button type="button" 
                class="alert-dismiss-btn absolute right-2 top-2 rounded-md p-1 opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2" 
                onclick="dismissAlert(this)">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 6 6 18"/>
                <path d="m6 6 12 12"/>
            </svg>
            <span class="sr-only">Fermer</span>
        </button>
    {% endif %}
</div>